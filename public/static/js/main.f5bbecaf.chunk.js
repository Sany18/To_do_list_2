(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),s=a.n(l),o=a(9),c=a(10),i=a(12),u=a(11),m=a(13),d=window.location,h=(d.protocol,d.hostname,{API:"",ENV:"test"}),g={root:h.API,tasksGet:h.API+"/tasks",taskCreatePost:h.API+"/tasks/",taskShowGet:h.API+"/tasks/",taskUpdatePut:h.API+"/tasks/",taskUpdatePatch:h.API+"/tasks/",taskDelete:h.API+"/tasks/",deleteSelected:h.API+"/tasks/delete_selected/",statusSwitchPOST:h.API+"/tasks/status_switch/",oauthTokenPOST:h.API+"/oauth/token/",userCreatePOST:h.API+"/user/create/"},f=a(18),p=a(19),E=a(120),k=a(16),v=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target;a.setState({value:Object(p.a)({},a.state.value,Object(f.a)({},t.name,t.value))})},a.loadFile=function(e){var t=e.target,n=new FileReader,r=t.files[0];n.readAsDataURL(r),n.onload=function(){return a.setState({value:Object(p.a)({},a.state.value,{image:n.result})})},n.onerror=function(e){return k.NotificationManager.info(e,"",3e3)}},a.getDateNow=function(){var e=new Date,t=function(e){return e<10?"0"+e:e};return t(e.getFullYear())+"-"+t(e.getMonth())+"-"+t(e.getDate())};var n=e.task;return a.state={value:Object(p.a)({title:"",theme:"",image:"",priority:0,due_date:a.getDateNow()},n)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.task||this.state.value;return r.a.createElement("div",null,r.a.createElement("label",null,"Theme"),r.a.createElement("input",{defaultValue:e.title,name:"title",onChange:this.handleChange}),r.a.createElement("label",null,"Task"),r.a.createElement("textarea",{defaultValue:e.theme,name:"theme",onChange:this.handleChange}),r.a.createElement("label",null,"Image (max 1mb)"),r.a.createElement("input",{type:"file",name:"image",onChange:this.loadFile}),r.a.createElement("label",null,"Up to"),r.a.createElement("input",{type:"date",defaultValue:e.due_date.substr(0,10)||this.getDateNow(),min:this.getDateNow(),name:"due_date",onChange:this.handleChange}),r.a.createElement(E.a,null,e.id?r.a.createElement(T,{type:"deleteTask",params:e.id}):"",r.a.createElement(T,{type:"closeTask"}),+this.state.value.id?r.a.createElement(T,{type:"updateTask",params:this.state.value}):r.a.createElement(T,{type:"saveTask",params:this.state.value})))}}]),t}(n.Component),b=a(118),T=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={isLoading:!1},a.fetchTo=function(e,t,n,r){var l={method:n,headers:{"Content-Type":"application/json"},body:a.getTokensBody(t)};"test"===h.ENV&&(console.log("to: ",e),console.log("request: ",l)),fetch(e,l).then(function(e){return e.json()}).then(function(e){e.access_token&&localStorage.setItem("access_token",e.access_token),e.user_name&&localStorage.setItem("user_name",e.user_name),e.user_id&&localStorage.setItem("user_id",e.user_id),e.error&&k.NotificationManager.info(e.error,"",3e3),e.message&&k.NotificationManager.success(e.message,"",3e3),"test"===h.ENV&&console.log("response: ",e),a.refreshTasks(),!e.error&&r&&setTimeout(function(){return r(e)},500)}).catch(function(e){return k.NotificationManager.error(e+"","",3e3)})},a.getTokensBody=function(e){return"password"===e.grant_type?JSON.stringify(e):localStorage.getItem("access_token")?(e.access_token=localStorage.getItem("access_token"),JSON.stringify(e)):JSON.stringify({access_token:localStorage.getItem("access_token")})},a.openTaskInModal=function(e){a.hideModal(),document.getElementById("modal").hidden=!1;var t=document.createElement("div");document.getElementById("modal").appendChild(t),s.a.render(r.a.createElement(v,{task:e}),t)},a.hideModal=function(){if(!document.getElementById("modal").hidden){var e=document.getElementById("modal");e.firstChild&&s.a.unmountComponentAtNode(e.firstChild),e.innerHTML="",e.hidden=!0}},a.saveTask=function(e){a.fetchTo(g.taskCreatePost,{task:e},"POST"),a.hideModal()},a.updateTask=function(e){a.fetchTo(g.taskUpdatePut+e.id,{task:e},"PUT"),a.hideModal()},a.refreshTasks=function(){localStorage.setItem("taps",+localStorage.getItem("taps")+1)},a.deleteTask=function(e){window.confirm("Delete this task?")&&(a.fetchTo(g.taskDelete+e,{},"DELETE"),a.hideModal())},a.login=function(e){localStorage.removeItem("deleteTasks"),e.grant_type="password",a.fetchTo(g.oauthTokenPOST,e,"POST",function(){return window.location.replace("/")})},a.signUp=function(e){e.grant_type="password",a.fetchTo(g.userCreatePOST,e,"POST")},a.logOut=function(){k.NotificationManager.success("Log out sucesfuly","",3e3),localStorage.clear()},a.deleteTasks=function(){var e=localStorage.getItem("deleteTasks");a.fetchTo(g.deleteSelected+e,{},"DELETE")},a.done=function(e){return a.fetchTo(g.statusSwitchPOST,{id:e},"POST")},a.getButton=function(e,t){switch(e){case"deleteTask":return r.a.createElement(b.a,{onClick:function(){return a.deleteTask(t)}},"Delete Ad");case"deleteTask2":return r.a.createElement(b.a,{onClick:function(){return a.deleteTask(t)}},"\xd7");case"editTask":return r.a.createElement(b.a,{onClick:function(){return a.openTaskInModal(t)}},"Edit");case"createTask":case"newTask":return r.a.createElement(b.a,{id:"newTask",bsStyle:"default",onClick:function(){return a.openTaskInModal()}},"New Ad");case"closeTask":return r.a.createElement(b.a,{id:"closeTask",onClick:a.hideModal},"Close");case"saveTask":return r.a.createElement(b.a,{onClick:function(){return a.saveTask(t)}},"Save");case"updateTask":return r.a.createElement(b.a,{onClick:function(){return a.updateTask(t)}},"Update");case"signUp":return r.a.createElement(b.a,{onClick:function(){return a.signUp(t)}},"Sign up");case"signIn":return r.a.createElement(b.a,{onClick:function(){return a.login(t)}},"Login");case"logOut":return r.a.createElement(b.a,{onClick:a.logOut},"Log out");case"done":return r.a.createElement(b.a,{onClick:function(){return a.done(t)}},"Unmark");case"notDone":return r.a.createElement(b.a,{onClick:function(){return a.done(t)}},"Mark");default:return k.NotificationManager.warning("Button is undefined","",3e3),null}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.params;return r.a.createElement(E.a,{bsSize:"small"},this.getButton(t,a))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getTasks=function(){var e="access_token="+localStorage.getItem("access_token");fetch(g.tasksGet+"?"+e).then(function(e){return e.json()}).then(function(e){return a.setState({data:e,isLoading:!1})}).catch(function(e){return a.setState({error:e})})},a.handleClick=function(){return a.setState({isOpen:!a.state.isOpen})},a.cutDate=function(e){return e?e.substr(0,10):"free"},a.state={isLoading:!1,error:null,isOpen:!1,data:[],taps:0,userName:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getTasks(),setInterval(function(t){var a=e.state.taps;localStorage.taps!==a&&(e.getTasks(),e.setState({taps:localStorage.taps||0}))},500)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.data,l=t.error;return a||l||!n.length?a||n.length||l?!a&&l?r.a.createElement("div",null,l.toString()):r.a.createElement("div",null,"Wait"):r.a.createElement("div",null,"Creare you first task"):r.a.createElement("div",{id:"tasks"},r.a.createElement("ul",{className:"list-group task"},n.map(function(t,a){return r.a.createElement("li",{className:"list-group-item mr-2 "+(t.user_id===e.props.userId?"list-group-item-success":"list-group-item-secondary"),key:a},r.a.createElement("div",{className:"float-left"},r.a.createElement("b",null," ",t.title),r.a.createElement("br",null),t.theme,r.a.createElement("br",null),"Author:",r.a.createElement("b",null," ",t.user_name),r.a.createElement("br",null),t.image?r.a.createElement("img",{src:t.image,alt:"img",style:{maxWidth:"5cm",maxHeight:"5cm"}}):null),r.a.createElement("div",{className:"text-right float-right"},r.a.createElement("div",{className:"d-inline"},"Up to: ",e.cutDate(t.due_date)," "),t.user_id===e.props.userId?r.a.createElement(E.a,null,r.a.createElement(T,{type:"editTask",params:t}),r.a.createElement(T,{type:"deleteTask2",params:t.id})):null))})))}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={time:""},a.getTime=function(){var e=(new Date).toLocaleTimeString()+" "+(new Date).toLocaleDateString();a.setState({time:e})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){setInterval(this.getTime,1e3)}},{key:"render",value:function(){return r.a.createElement("h2",{className:"mr-2",id:"clock"},"Now is ",this.state.time)}}]),t}(n.Component),I=a(121),O=a(126),C=a(122),w=a(124),j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target;a.setState({value:Object(p.a)({},a.state.value,Object(f.a)({},t.name,t.value))})},a.state={isLoading:!0,error:null,tasks:[],value:{email:"",password:""}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.isLoading?r.a.createElement(I.a,null,r.a.createElement(O.a,{controlId:"formInlineMail2"},r.a.createElement(C.a,null,"Email"),r.a.createElement(w.a,{bsSize:"small",type:"text",name:"email",placeholder:"email",onChange:this.handleChange})),r.a.createElement(O.a,{controlId:"formInlinePass2"},r.a.createElement(C.a,null,"Password"),r.a.createElement(w.a,{bsSize:"small",name:"password",type:"password",placeholder:"password",onChange:this.handleChange})),r.a.createElement(E.a,null,r.a.createElement(T,{type:"signIn",params:this.state.value}),r.a.createElement(b.a,{href:"/registration",bsSize:"small",className:"text-body"},"Sign up"))):this.state.error?(document.getElementById("notice").innerHTML=this.state.error.toString(),null):void 0}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target;a.setState({value:Object(p.a)({},a.state.value,Object(f.a)({},t.name,t.value))})},a.state={isLoading:!1,error:null,tasks:[],value:{email:"",password:"",confirm_password:"",last_name:"",first_name:""}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.state.isLoading?this.state.error?(document.getElementById("notice").innerHTML=this.state.error.toString(),null):void 0:r.a.createElement(I.a,null,r.a.createElement(O.a,{controlId:"formInlineEmail"},r.a.createElement(C.a,null,"Email"),r.a.createElement(w.a,{bsSize:"small",name:"email",type:"email",placeholder:"email",onChange:this.handleChange})),r.a.createElement(O.a,{controlId:"formInlinePass"},r.a.createElement(C.a,null,"Password"),r.a.createElement(w.a,{bsSize:"small",name:"password",type:"password",placeholder:"password",onChange:this.handleChange})),r.a.createElement(O.a,{controlId:"formInlineConfirmPass"},r.a.createElement(C.a,null,"Confirm password"),r.a.createElement(w.a,{bsSize:"small",name:"confirm_password",type:"password",placeholder:"confirm password",onChange:this.handleChange})),r.a.createElement(O.a,{controlId:"formInlineName"},r.a.createElement(C.a,null,"Your name"),r.a.createElement(w.a,{bsSize:"small",name:"first_name",type:"text",placeholder:"name",onChange:this.handleChange})),r.a.createElement(O.a,{controlId:"formInline2Name"},r.a.createElement(C.a,null,"Last name"),r.a.createElement(w.a,{bsSize:"small",name:"last_name",type:"text",placeholder:"last name",onChange:this.handleChange})),r.a.createElement(E.a,null,r.a.createElement(T,{type:"signUp",params:this.state.value}),r.a.createElement(b.a,{href:"/login",bsSize:"small",className:"text-body"},"Login")))}}]),t}(n.Component),_=a(123),P=a(125),L=(a(111),a(113),a(51),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={token:localStorage.access_token,userName:"",userId:void 0},a.renderRoot=function(){var e=a.state,t=e.token,n=e.userName,l=e.userId;return r.a.createElement("div",null,r.a.createElement("div",{className:"mb-2"},r.a.createElement(E.a,{bsSize:"small"},t?r.a.createElement(T,{type:"createTask"}):null,t?r.a.createElement(T,{type:"logOut"}):r.a.createElement(b.a,{href:"/login",className:"text-body"},"Login"))),r.a.createElement(y,{userName:n,userId:l}))},a.renderRegistration=function(){return r.a.createElement("div",{className:"forms"},r.a.createElement("h3",null,"Registration"),r.a.createElement(N,null))},a.renderLogin=function(){return r.a.createElement("div",{className:"forms"},r.a.createElement("h3",null,"Login"),r.a.createElement(j,null))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.setItem("taps",0),document.getElementById("modal")&&(document.getElementById("modal").hidden=!0),"test"===h.ENV&&console.log("Test environment"),setInterval(function(t){var a=e.state,n=a.token,r=a.userId;localStorage.access_token===n&&localStorage.user_id==r||e.setState({token:localStorage.access_token,userName:localStorage.user_name,userId:+localStorage.user_id})},500)}},{key:"render",value:function(){var e=this.state.userName;return r.a.createElement("div",{className:"content"},r.a.createElement(k.NotificationContainer,null),r.a.createElement("header",null,r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(b.a,{href:"/",className:"btn btn-outline-primary btn-lg"},"Go to Board"),r.a.createElement("div",{className:"user-name"},e?"Hi, "+e:"read only, guest")),r.a.createElement(S,null)),r.a.createElement(_.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{exact:!0,path:"/",component:this.renderRoot}),r.a.createElement(P.a,{path:"/registration",component:this.renderRegistration}),r.a.createElement(P.a,{path:"/login",component:this.renderLogin}))))}}]),t}(n.Component));s.a.render(r.a.createElement(L,null),document.getElementById("root"))},51:function(e,t,a){},59:function(e,t,a){e.exports=a(117)}},[[59,2,1]]]);
//# sourceMappingURL=main.f5bbecaf.chunk.js.map